<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />
  <meta name="description" content="Contexts are SIP.js objects that help your WebRTC app handle SIP requests and define what happens after a request is accepted." />
  <meta name="viewport" content="initial-scale=1" />
  <title>SIP Contexts | SIP.js</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href='//fonts.googleapis.com/css?family=Nunito:400,700,300|Varela+Round' rel='stylesheet' type='text/css'>
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
    
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css" />
  
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <script src="/shared/js/documentation.js" type="text/javascript"></script>
  <link rel="shortcut icon" type="image/x-icon" href="/shared/img/favicon-7.ico"/>
</head>


<body class="api">
	<div id="dev"></div>
<header id="siteHeader">
  <div class="wrapper">
    <nav id="mainNav">
      <a id="logo-link" href="/"><img id="logo" src="/shared/img/logo.png" alt="sip.js"></a>
      <ul id="full-nav" class="horizontal mobile-hide">
        <li><a href="https://github.com/onsip/SIP.js/releases">Download</a></li>
        <li><a id="api-nav" href="https://github.com/onsip/SIP.js/blob/master/docs/README.md">API</a></li>
        <li><a href="/guides/">Guides</a></li>
        <li><a href="https://github.com/onsip/sip.js" target="_blank">Github</a></li>
        <li><a href="/aboutus/" class="nav-aboutus">About Us</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/sip_js" target="_blank">Support</a></li>
        <li><a href="/faq/">FAQ</a></li>
      </ul>
    </nav>
  </div>
</header>


	<article id="main" class="wrapper group">
		<header id="sectionHeader">
			<h1><a href="/api/">API</a></h1>
			<nav id="subNav">
				<ul class="horizontal">
					<li class="first"><a href="/api/0.10.0/">0.10.x</a></li>
				</ul>
			</nav>
		</header>
		<div id="content">
			
<h1 id="context">Context</h1>

<h2 id="what-is-a-context">What is a Context?</h2>

<p>Let’s get this out of the way first:  <em>context is not a SIP term.</em>  We made it up. Sorry. That said, it is an incredibly useful concept for a few reasons.</p>

<p>In the realm of SIP, requests and responses are sent from one user agent to another. These individual messages make up a SIP <em>transaction</em>. Transactions are able to track forked requests, retransmissions, timeouts, provisional responses, etc. As soon as the request is rejected, the transaction terminates. Any new requests create completely new transactions. Sometimes these requests are related, though, such as when the first request was challenged by an authenticating proxy.  Contexts let us wrap these two requests into one logical object.</p>

<p>Contexts also provide another use:  <em>they stick around.</em> SIP transactions terminate as soon as the request receives a final response, even if the request is accepted. Since the contexts don’t go away, we can use them to describe the result of the request.  For example, a <code>ServerContext</code> contains the body of the accepted message, which an application can display to the user. An INVITE’s <code>SIP.ClientContext</code> becomes the SIP session created by the accepted INVITE request (as a <code>SIP.Session</code>). This is where the contexts get their name. They represent not the request, but the entire surrounding context of where the request came from and what it is actually requesting.</p>

<h2 id="flavors-of-context-objects">Flavors of Context Objects</h2>

<p>Take a moment to think about your favorite kind of ice cream. Maybe it’s chocolate with fudge swirls or pistachio with real nuts, or maybe just vanilla with a few fresh berries. Notice that these ice creams have two parts: the base (chocolate, pistachio, or vanilla) and the mixin (fudge, nuts, or berries). Contexts are, in a much less delicious way, kind of like ice cream. They have two parts, and they match up to their two main uses.</p>

<ol>
  <li>
    <p>First, the base. This part of the Context <em>deals with handling the request, itself.</em> If you’re sending a MESSAGE request, for example, your Context will be a <code>ClientContext</code> and will send the request, handle any authorization challenges and retransmissions, and notify you via events when the MESSAGE is accepted or rejected. If you’re receiving the request, your context will be a <code>ServerContext</code>, and it will do the opposite:  notifying you that you received the request and allowing you to respond to it.</p>
  </li>
  <li>
    <p>Second, the mixins. This part of the Context <em>defines what will happen after the request is accepted.</em>  An INVITE request will use the <code>Session</code> to define session methods such as <code>hold()</code> and <code>refer()</code>, while MESSAGE requests use <code>Message</code> to parse the body of the MESSAGE.</p>
  </li>
</ol>

<p>While some people may like plain ice cream or snacking on chocolate chips, creating a <code>ServerContext</code> or <code>Session</code> alone isn’t very useful. The magic happens when you <em>mix them together.</em> That’s why in the source code you’ll typically see objects called <code>InviteServerContext</code> or <code>MessageClientContext</code>. They each share only the behavior they need for the <em>context</em> in which the request was encountered.</p>

<h2 id="read-on">Read on</h2>

<ul>
  <li>
<a href="../context/client/"><code>SIP.ClientContext</code></a> and <a href="../context/server/"><code>SIP.ServerContext</code></a> documentation</li>
  <li>
<a href="../session"><code>SIP.Session</code></a> documentation</li>
  <li>
<a href="../message"><code>SIP.Message</code></a> documentation</li>
</ul>


		</div>

		<nav id="sideNav">
  <ul>


    <li class="header"><a href="/api/0.10.0/">Overview</a></li>

    <li class="parent">
      <a class="parent" href="/api/0.10.0/simple/">Simple</a>
      <ul>
        <li><a href="/api/0.10.0/simple_configuration_parameters/">Simple Configuration Parameters</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/ua/">UA (User Agent)</a>
      <ul>
        <li><a href="/api/0.10.0/ua_configuration_parameters/">UA Configuration Parameters</a></li>
      </ul>
    </li>
    <li><a href="/api/0.10.0/session/">Session</a></li>
    <li><a href="/api/0.10.0/sessionDescriptionHandler/">Session Description Handler</a></li>


    <li class="header"><a href="/api/0.10.0/context/">Contexts</a></li>


    <li><a href="/api/0.10.0/context/client/">Client Context</a></li>
    <li><a href="/api/0.10.0/context/server/">Server Context</a></li>
    <li><a href="/api/0.10.0/subscription/">Subscription</a></li>
    <li><a href="/api/0.10.0/message/">Message</a></li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/refer/">Refer</a>
      <ul>
        <li><a href="/api/0.10.0/refer/referClientContext/">Refer Client Context</a></li>
        <li><a href="/api/0.10.0/refer/referServerContext/">Refer Server Context</a></li>
      </ul>
    </li>

    <li class="header"><div class="title">Data Structures</li>


    <li class="parent">
      <a class="parent" href="/api/0.10.0/uri/">URI</a>
      <ul>
        <li><a href="/api/0.10.0/uri/#construction">Construction</a></li>
        <li><a href="/api/0.10.0/uri/#instance-methods">Instance Methods</a></li>
	<li><a href="/api/0.10.0/uri/#static-methods">Static Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/nameAddrHeader/">NameAddrHeader</a>
      <ul>
	<li><a href="/api/0.10.0/nameAddrHeader/#construction">Construction</a></li>
        <li><a href="/api/0.10.0/nameAddrHeader/#instance-variables">Instance Variables</a></li>
        <li><a href="/api/0.10.0/nameAddrHeader/#instance-methods">Instance Methods</a></li>
	<li><a href="/api/0.10.0/nameAddrHeader/#static-methods">Static Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/sipMessage/">Requests and Responses</a>
      <ul>
        <li><a href="/api/0.10.0/sipMessage/#instance-variables">Instance Variables</a></li>
        <li><a href="/api/0.10.0/sipMessage/#instance-methods">Instance Methods</a></li>
      </ul>
    </li>


    <li class="header"><div class="title">Advanced</div></li>


    <li class="parent">
      <a class="parent" href="/api/0.10.0/transport/">SIP.Transport</a>
      <ul>
        <li><a href="/api/0.10.0/transport/#construction">Construction</a></li>
        <li><a href="/api/0.10.0/transport/#instance-variables">Instance Variables</a></li>
	<li><a href="/api/0.10.0/transport/#instance-methods">Instance Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/grammar/">SIP.Grammar</a>
      <ul>
        <li><a href="/api/0.10.0/grammar/#instance-variables">Instance Variables</a></li>
	<li><a href="/api/0.10.0/grammar/#methods">Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/eventEmitter/">SIP.EventEmitter</a>
      <ul>
        <li><a href="/api/0.10.0/eventEmitter/#construction">Construction</a></li>
        <li><a href="/api/0.10.0/eventEmitter/#instance-methods">Instance Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/causes/">Failure and End Causes</a>
      <ul>
        <li><a href="/api/0.10.0/causes/#common-causes">Common Causes</a></li>
        <li><a href="/api/0.10.0/causes/#sip-error-causes">Sip Error Causes</a></li>
        <li><a href="/api/0.10.0/causes/#session-causes">Session Causes</a></li>
      </ul>
    </li>
  </ul>
</nav>


	</article>

	<footer class="light-gray-bg">
  <div class="wrapper">
    <div id="onsip-stamp">
      <span id="made-by-prefix">made by</span>
      <a href="http://developer.onsip.com" id="onsip"></a>
    </div>
    <nav class="left">
      <ul class="horizontal">
        <li><a href="https://groups.google.com/forum/#!forum/sip_js" target="_blank">Mailing List</a></li>
        <li><a href="https://github.com/onsip/sip.js/issues" target="_blank">Report Issues</a></li>
        <li><a href="/license/">License</a></li>
      </ul>
    </nav>
    <nav class="right">
      <ul class="horizontal">
        <li><a href="https://travis-ci.org/onsip/SIP.js"><img src="https://travis-ci.org/onsip/SIP.js.png?branch=master"/></a></li>
        <li><a href="http://onsip.com/blog" target="_blank">Blog</a></li>
        <li><a href="/aboutus/">About</a></li>
        <li><a href="/faq/">FAQ</a></li>
      </ul>
    </nav>
    <div class="clearfix"></div>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1008379-16', 'sipjs.com');
  ga('send', 'pageview');
</script>
<script>
  // Remove all 'no-js-hide' classes because Javascript is working
  $(function () {
      $('.no-js-hide').each(function (i, e) {
          $(e).removeClass('no-js-hide');
      });
      $('.no-js-block').each(function (i, e) {
          $(e).removeClass('no-js-block');
      });
  });
</script>


</body>
</html>
