<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />
  <meta name="description" content="SIP.js Transport provides a transport layer for SIP over WebSocket connections." />
  <meta name="viewport" content="initial-scale=1" />
  <title>Transport | SIP.js</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href='//fonts.googleapis.com/css?family=Nunito:400,700,300|Varela+Round' rel='stylesheet' type='text/css'>
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
    
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css" />
  
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <script src="/shared/js/documentation.js" type="text/javascript"></script>
  <link rel="shortcut icon" type="image/x-icon" href="/shared/img/favicon-7.ico"/>
</head>


<body class="api">
	<div id="dev"></div>
<header id="siteHeader">
  <div class="wrapper">
    <nav id="mainNav">
      <a id="logo-link" href="/"><img id="logo" src="/shared/img/logo.png" alt="sip.js"></a>
      <ul id="full-nav" class="horizontal mobile-hide">
        <li><a href="/download/">Download</a></li>
        <li><a id="api-nav" href="/api/0.12.0/">API</a></li>
        <li><a href="/guides/">Guides</a></li>
        <li><a href="https://github.com/onsip/sip.js" target="_blank">Github</a></li>
        <li><a href="/aboutus/" class="nav-aboutus">About Us</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/sip_js" target="_blank">Support</a></li>
        <li><a href="/faq/">FAQ</a></li>
      </ul>
    </nav>
  </div>
</header>


	<article id="main" class="wrapper group">
		<header id="sectionHeader">
			<h1><a href="/api/">API</a></h1>
			<nav id="subNav">
				<ul class="horizontal">
					<li class="first"><a href="/api/0.10.0/">0.10.x</a></li>
				</ul>
			</nav>
		</header>
		<div id="content">
			
<h1 id="siptransport">SIP.Transport</h1>

<p>The transport layer is responsible for the actual transmission of requests
and responses over network transports. For SIP.js, this includes maintaining the WebSocket connection, as well as sending and receiving SIP requests and responses over the WebSocket.</p>

<ul id="markdown-toc">
  <li><a href="#construction" id="markdown-toc-construction">Construction</a></li>
  <li>
<a href="#instance-variables" id="markdown-toc-instance-variables">Instance Variables</a>    <ul>
      <li><a href="#logger" id="markdown-toc-logger"><code>logger</code></a></li>
      <li><a href="#ua" id="markdown-toc-ua"><code>ua</code></a></li>
      <li><a href="#ws" id="markdown-toc-ws"><code>ws</code></a></li>
      <li><a href="#server" id="markdown-toc-server"><code>server</code></a></li>
      <li><a href="#reconnectionattempts" id="markdown-toc-reconnectionattempts"><code>reconnection_attempts</code></a></li>
      <li><a href="#closed" id="markdown-toc-closed"><code>closed</code></a></li>
      <li><a href="#connected" id="markdown-toc-connected"><code>connected</code></a></li>
      <li><a href="#reconnecttimer" id="markdown-toc-reconnecttimer"><code>reconnectTimer</code></a></li>
      <li><a href="#lasttransporterror" id="markdown-toc-lasttransporterror"><code>lastTransportError</code></a></li>
    </ul>
  </li>
  <li>
<a href="#instance-methods" id="markdown-toc-instance-methods">Instance Methods</a>    <ul>
      <li><a href="#sendmsg" id="markdown-toc-sendmsg"><code>send(msg)</code></a></li>
      <li><a href="#connect" id="markdown-toc-connect"><code>connect()</code></a></li>
      <li><a href="#disconnect" id="markdown-toc-disconnect"><code>disconnect()</code></a></li>
    </ul>
  </li>
</ul>

<div class="dev">

  <h2 class="no_toc" id="dependencies">Dependencies</h2>

  <ul>
    <li>SIP.Parser.parseMessage</li>
    <li>SIP.IncomingRequest</li>
    <li>SIP.IncomingResponse</li>
    <li>SIP.sanityCheck</li>
    <li>SIP.UA.C</li>
    <li>WebSocket</li>
  </ul>

  <h3 class="no_toc" id="injected">Injected</h3>

  <h4 class="no_toc" id="sipua">SIP.UA</h4>

  <ul>
    <li>.getLogger</li>
    <li>.transport</li>
    <li>.status</li>
    <li>.emit</li>
    <li>.onTransportConnecting</li>
    <li>.onTransportConnected</li>
    <li>.onTransportClosed</li>
    <li>.onTransportError</li>
    <li>.receiveRequest</li>
    <li>.transactions.{ict,nict}</li>
    <li>.configuration.traceSip</li>
    <li>.configuration.wsServerMaxReconnection</li>
    <li>.configuration.wsServerReconnectionTimeout</li>
    <li>WebSocket server</li>
  </ul>

  <h4 class="no_toc" id="wsserver">wsServer</h4>

  <ul>
    <li>.ws_uri</li>
  </ul>

</div>
<!-- end dev -->

<h2 id="construction">Construction</h2>

<p>The construction of a transport is not meant to be done manually. Instead, SIP.js user agents create a transport to use for themselves. The UA is passed in so that incoming messages may be routed to the appropriate transactions for processing.</p>

<p>When constructed, the new Transport will assign itself as the UAâ€™s transport property before automatically attempting to connect to the designated WebSocket server.</p>

<h2 id="instance-variables">Instance Variables</h2>

<h3 id="logger"><code>logger</code></h3>

<p><code>Logger</code> - The outlet for log messages.</p>

<h3 id="ua"><code>ua</code></h3>

<p><code>SIP.UA</code> - The UA using the transport</p>

<h3 id="ws"><code>ws</code></h3>

<p><code>WebSocket</code> - The WebSocket used for sending and receiving messages.</p>

<h3 id="server"><code>server</code></h3>

<p><code>Object</code> - The wsServer object the transport connects to, from the UA
configuration.</p>

<h3 id="reconnectionattempts"><code>reconnection_attempts</code></h3>

<p><code>Integer</code> - The number of times the Transport has attempted to reconnect in
event of error.</p>

<h3 id="closed"><code>closed</code></h3>

<p><code>Boolean</code> - Whether or not the UA has requested the Transport be closed.</p>

<h3 id="connected"><code>connected</code></h3>

<p><code>Boolean</code> - Whether or not the WebSocket connection is open.</p>

<h3 id="reconnecttimer"><code>reconnectTimer</code></h3>

<p><code>Integer</code> - Global timer ID used to track time between reconnection attempts.</p>

<h3 id="lasttransporterror"><code>lastTransportError</code></h3>

<p><code>Object</code> - When the WebSocket is closed, any error condition gets stored here.</p>

<h2 id="instance-methods">Instance Methods</h2>

<h3 id="sendmsg"><code>send(msg)</code></h3>

<p>Send a message along the WebSocket</p>

<h4 id="parameters">Parameters</h4>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>msg</code></td>
      <td><code>SIP.OutgoingRequest|String</code></td>
      <td>A SIP Request (represented as a String or <a href="../sipMessage/">SIP.OutgoingRequest</a>) to send along the WebSocket.</td>
    </tr>
  </tbody>
</table>

<h4 id="returns">Returns</h4>

<p><code>Boolean</code> - <code>true</code> if the WebSocket is open for sending. Otherwise, <code>false</code></p>

<h3 id="connect"><code>connect()</code></h3>

<p>Create and open a new WebSocket connection to the configured WebSocket server.</p>

<h3 id="disconnect"><code>disconnect()</code></h3>

<p>Disconnect from the WebSocket and cancel any reconnection attempts.</p>

<div class="dev">

  <h3 class="no_toc" id="reconnect"><code>reConnect()</code></h3>

  <p><em>Internal</em> Reconnect to the WebSocket in the event of unexpected disconnection. This will attempt to reconnect up to <a href="../ua_configuration_parameters/#wsservermaxreconnection"><code>ua.configuration.wsServerMaxReconnection</code></a> times, with a gap of <a href="../ua_configuration_parameters/#wsserverreconnectiontimeout"><code>ua.configuration.wsServerReconnectionTimeout</code></a> seconds between each request.</p>

  <h3 class="no_toc" id="onopen"><code>onOpen()</code></h3>

  <p><em>Internal</em> This method is called when the WebSocket is opened. Its primary purpose is to clear the reconnection attempts and notify the UA.</p>

  <h3 class="no_toc" id="onclose"><code>onClose()</code></h3>

  <p><em>Internal</em> This method is called when the WebSocket is closed. Its primary purpose is to notify the UA and attempt to reconnect if necessary.</p>

  <h3 class="no_toc" id="onmessage"><code>onMessage()</code></h3>

  <p><em>Internal</em> This method is called when a message is received from the WebSocket. It parses the SIP message, runs sanity checks, and passes it to the UA (for requests) or transaction (for responses) for processing.</p>

  <h3 class="no_toc" id="onerror"><code>onError()</code></h3>

  <p><em>Internal</em> Logs an error when the WebSocket errors. Errors typically also disconnect the WebSocket, so no extra handling is done here.</p>

</div>

		</div>

		<nav id="sideNav">
  <ul>


    <li class="header"><a href="/api/0.10.0/">Overview</a></li>

    <li class="parent">
      <a class="parent" href="/api/0.10.0/simple/">Simple</a>
      <ul>
        <li><a href="/api/0.10.0/simple_configuration_parameters/">Simple Configuration Parameters</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/ua/">UA (User Agent)</a>
      <ul>
        <li><a href="/api/0.10.0/ua_configuration_parameters/">UA Configuration Parameters</a></li>
      </ul>
    </li>
    <li><a href="/api/0.10.0/session/">Session</a></li>
    <li><a href="/api/0.10.0/sessionDescriptionHandler/">Session Description Handler</a></li>


    <li class="header"><a href="/api/0.10.0/context/">Contexts</a></li>


    <li><a href="/api/0.10.0/context/client/">Client Context</a></li>
    <li><a href="/api/0.10.0/context/server/">Server Context</a></li>
    <li><a href="/api/0.10.0/subscription/">Subscription</a></li>
    <li><a href="/api/0.10.0/message/">Message</a></li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/refer/">Refer</a>
      <ul>
        <li><a href="/api/0.10.0/refer/referClientContext/">Refer Client Context</a></li>
        <li><a href="/api/0.10.0/refer/referServerContext/">Refer Server Context</a></li>
      </ul>
    </li>

    <li class="header"><div class="title">Data Structures</li>


    <li class="parent">
      <a class="parent" href="/api/0.10.0/uri/">URI</a>
      <ul>
        <li><a href="/api/0.10.0/uri/#construction">Construction</a></li>
        <li><a href="/api/0.10.0/uri/#instance-methods">Instance Methods</a></li>
	<li><a href="/api/0.10.0/uri/#static-methods">Static Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/nameAddrHeader/">NameAddrHeader</a>
      <ul>
	<li><a href="/api/0.10.0/nameAddrHeader/#construction">Construction</a></li>
        <li><a href="/api/0.10.0/nameAddrHeader/#instance-variables">Instance Variables</a></li>
        <li><a href="/api/0.10.0/nameAddrHeader/#instance-methods">Instance Methods</a></li>
	<li><a href="/api/0.10.0/nameAddrHeader/#static-methods">Static Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/sipMessage/">Requests and Responses</a>
      <ul>
        <li><a href="/api/0.10.0/sipMessage/#instance-variables">Instance Variables</a></li>
        <li><a href="/api/0.10.0/sipMessage/#instance-methods">Instance Methods</a></li>
      </ul>
    </li>


    <li class="header"><div class="title">Advanced</div></li>


    <li class="parent">
      <a class="parent" href="/api/0.10.0/transport/">SIP.Transport</a>
      <ul>
        <li><a href="/api/0.10.0/transport/#construction">Construction</a></li>
        <li><a href="/api/0.10.0/transport/#instance-variables">Instance Variables</a></li>
	<li><a href="/api/0.10.0/transport/#instance-methods">Instance Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/grammar/">SIP.Grammar</a>
      <ul>
        <li><a href="/api/0.10.0/grammar/#instance-variables">Instance Variables</a></li>
	<li><a href="/api/0.10.0/grammar/#methods">Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/eventEmitter/">SIP.EventEmitter</a>
      <ul>
        <li><a href="/api/0.10.0/eventEmitter/#construction">Construction</a></li>
        <li><a href="/api/0.10.0/eventEmitter/#instance-methods">Instance Methods</a></li>
      </ul>
    </li>
    <li class="parent">
      <a class="parent" href="/api/0.10.0/causes/">Failure and End Causes</a>
      <ul>
        <li><a href="/api/0.10.0/causes/#common-causes">Common Causes</a></li>
        <li><a href="/api/0.10.0/causes/#sip-error-causes">Sip Error Causes</a></li>
        <li><a href="/api/0.10.0/causes/#session-causes">Session Causes</a></li>
      </ul>
    </li>
  </ul>
</nav>


	</article>

	<footer class="light-gray-bg">
  <div class="wrapper">
    <div id="onsip-stamp">
      <span id="made-by-prefix">made by</span>
      <a href="http://developer.onsip.com" id="onsip"></a>
    </div>
    <nav class="left">
      <ul class="horizontal">
        <li><a href="https://groups.google.com/forum/#!forum/sip_js" target="_blank">Mailing List</a></li>
        <li><a href="https://github.com/onsip/sip.js/issues" target="_blank">Report Issues</a></li>
        <li><a href="/license/">License</a></li>
      </ul>
    </nav>
    <nav class="right">
      <ul class="horizontal">
        <li><a href="https://travis-ci.org/onsip/SIP.js"><img src="https://travis-ci.org/onsip/SIP.js.png?branch=master"/></a></li>
        <li><a href="http://onsip.com/blog" target="_blank">Blog</a></li>
        <li><a href="/aboutus/">About</a></li>
        <li><a href="/faq/">FAQ</a></li>
      </ul>
    </nav>
    <div class="clearfix"></div>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1008379-16', 'sipjs.com');
  ga('send', 'pageview');
</script>
<script>
  // Remove all 'no-js-hide' classes because Javascript is working
  $(function () {
      $('.no-js-hide').each(function (i, e) {
          $(e).removeClass('no-js-hide');
      });
      $('.no-js-block').each(function (i, e) {
          $(e).removeClass('no-js-block');
      });
  });
</script>


</body>
</html>
